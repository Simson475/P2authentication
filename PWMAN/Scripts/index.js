!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=167)}({167:function(e,n){function t(e,n){e.style.display="none",n.style.display="inline"}function o(e,n){switch(e){case"retrievePassword":let e=document.getElementById("SignedIn-username"),o=document.getElementById("SignedIn-password"),r=document.getElementById("SignedIn-submit"),s=document.getElementById("SignedIn2"),d=document.getElementById("LogoutButton");document.getElementById("Settings").style.display="none",d.style.display="none",document.getElementById("SignedIn-website").style.display="none",e.innerHTML=n.username,o.innerHTML=n.password,t(r,s);break;case"SignIn":let l=document.getElementById("LogIn"),u=document.getElementById("SignedIn"),i=document.getElementById("Settings");i.style.top="160px",i.style.left="110px",i.style.padding="5px",i.style.paddingBottom="4px",t(l,u);break;case"Error":let a=document.getElementById("SignedIn-submit"),c=document.getElementById("error"),m=document.getElementById("LogoutButton"),g=document.getElementById("Settings");m.style.display="none",g.style.display="none",t(a,c);break;default:console.log("Something went wrong!")}}document.getElementById("LogIn-form").addEventListener("submit",(async function(e){e.preventDefault();let n=document.getElementById("LogIn-form");chrome.storage.local.get([n.username.value],(async function(e){let n=document.getElementById("LogIn-form"),t=n.password.value.concat(e[n.username.value]),r=t.split("").reduce((e,n)=>(e<<5)-e+n.charCodeAt(0)|0,0);let s={username:n.username.value,password:r},d=await fetch("https://sw2b2-23.p2datsw.cs.aau.dk/node0/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});d=await d.json(),null!=d.error?(console.log(d),function(){let e=document.getElementById("LogIn-username"),n=document.getElementById("LogIn-password"),t=document.getElementById("LogIn-paragraph");e.style.borderColor="red",n.style.borderColor="red",t.style.display="inline"}()):chrome.runtime.sendMessage({token:"bearer "+d.token},(function(e){console.log("Bearer token successfully saved"),1==e.success?o("SignIn"):console.log("*An error has occured*")})),n.reset()}))})),document.getElementById("SignedIn-submit").addEventListener("click",(async function(e){e.preventDefault(),chrome.runtime.sendMessage({getToken:!0},(async function(e){console.log(e),null!==e.token&&(void 0!==e.token?chrome.tabs.query({active:!0,currentWindow:!0},(async function(n){let t=n[0],r=await fetch("https://sw2b2-23.p2datsw.cs.aau.dk/node0/getPassword",{method:"POST",headers:{"Content-Type":"application/json",authorization:e.token},body:JSON.stringify({domain:t.url})});r=await r.json(),null!=r.error?(console.log(r),o("Error",r)):o("retrievePassword",r)})):console.log("response.token is undefined"))}))})),document.getElementById("LogoutButton").addEventListener("click",(function(){chrome.runtime.sendMessage({token:null},(function(e){if(1==e.success){let e=document.getElementById("SignedIn"),n=document.getElementById("Logout");document.getElementById("Settings").style.display="none",t(e,n)}else console.log("*An error has occured*")}))})),chrome.runtime.sendMessage({getToken:!0},(function(e){null!==e.token&&o("SignIn")}))}});